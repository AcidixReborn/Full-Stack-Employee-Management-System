<%- include('../partials/header', { title: title }) %>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-custom">
  <div class="container">
    <a class="navbar-brand" href="/">
      <i class="bi bi-building me-2"></i>Employee Directory
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link active" href="/">
            <i class="bi bi-people me-1"></i>Directory
          </a>
        </li>
      </ul>
      <div class="d-flex align-items-center">
        <% if (user) { %>
          <span class="text-white me-3">
            <i class="bi bi-person-circle me-1"></i>
            Welcome, <strong><%= user.username %></strong>
          </span>
          <a href="/logout" class="btn btn-outline-light btn-sm">
            <i class="bi bi-box-arrow-right me-1"></i>Logout
          </a>
        <% } else { %>
          <a href="/login" class="btn btn-outline-light btn-sm me-2">
            <i class="bi bi-box-arrow-in-right me-1"></i>Login
          </a>
          <a href="/signup" class="btn btn-light btn-sm">
            <i class="bi bi-person-plus me-1"></i>Sign Up
          </a>
        <% } %>
      </div>
    </div>
  </div>
</nav>

<!-- Main Content -->
<div class="container py-4">
  <!-- Page Header -->
  <div class="welcome-header mb-4">
    <div class="d-flex justify-content-between align-items-center flex-wrap">
      <div>
        <h2 class="mb-1"><i class="bi bi-people-fill me-2"></i>Employee Directory</h2>
        <p class="mb-0 opacity-75">Browse our team members</p>
      </div>
      <div class="stat-card mt-3 mt-md-0" style="background: rgba(255,255,255,0.15); border: none;">
        <div class="stat-number" style="color: white;"><%= employees.length %></div>
        <div class="stat-label" style="color: rgba(255,255,255,0.8);">Team Members</div>
      </div>
    </div>
  </div>

  <!-- Employees Table -->
  <div class="card">
    <div class="card-body">
      <% if (employees.length === 0) { %>
        <div class="text-center text-muted py-5">
          <i class="bi bi-person-x" style="font-size: 4rem;"></i>
          <h5 class="mt-3">No Employees Found</h5>
          <p class="mb-0">The directory is currently empty.</p>
        </div>
      <% } else { %>
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Designation</th>
                <th>Email</th>
                <th>Contact</th>
                <th>Department</th>
                <th>Joining Date</th>
                <th>Location</th>
              </tr>
            </thead>
            <tbody>
              <% employees.forEach(function(emp) { %>
                <tr>
                  <td><span class="badge bg-light text-dark"><%= emp.id %></span></td>
                  <td>
                    <div class="d-flex align-items-center">
                      <div class="employee-avatar">
                        <i class="bi bi-person-fill"></i>
                      </div>
                      <span class="fw-semibold flex-grow-1 text-center"><%= emp.name %></span>
                    </div>
                  </td>
                  <td><%= emp.designation %></td>
                  <td>
                    <a href="mailto:<%= emp.email %>" class="text-decoration-none">
                      <i class="bi bi-envelope me-1 text-muted"></i><%= emp.email %>
                    </a>
                  </td>
                  <td>
                    <i class="bi bi-telephone me-1 text-muted"></i><%= emp.contact %>
                  </td>
                  <td><span class="badge badge-department"><%= emp.department %></span></td>
                  <td><%= emp.joiningDate %></td>
                  <td>
                    <i class="bi bi-geo-alt me-1 text-muted"></i><%= emp.location %>
                  </td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      <% } %>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>
